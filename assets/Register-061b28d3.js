import"./base-a89e4049.js";import{w as y,E,v as h,s as x,t as q}from"./el-form-item-5a29c62e.js";import{E as U}from"./el-button-a05ee2b1.js";import{h as B,g as F}from"./el-scrollbar-4f04b271.js";import{d as k,b as p,b8 as C,P,q as R,o as N,B as S,H as u,s as l,w as t,Y as i,Z as c}from"./index-5599dcdb.js";/* empty css                   */import"./typescript-defaf979.js";const $={class:"register"},I={class:"form-container"},A={class:"manage-tip"},D=u("span",{class:"title"},"後台管理系統",-1),H={class:"tiparea"},K=k({__name:"Register",setup(M){const m=p(),_=C(),a=p({name:"米斯特吴",email:"27732357@qq.com",password:"321321",password2:"321321",identity:"管理员"}),g=P({name:[{required:!0,message:"用戶名不能為空",trigger:"change"},{min:2,max:30,message:"長度在2到30個字符之間",trigger:"blur"}],email:[{type:"email",required:!0,message:"信箱格式錯誤",trigger:"blur"}],password:[{required:!0,message:"密碼不能為空",trigger:"blur"},{min:6,max:30,message:"長度在6到30個字符之間",trigger:"blur"}],password2:[{min:6,max:30,message:"長度在6到30個字符之間",trigger:"blur"},{validator:(n,e,o)=>{e===""?o(new Error("請重新輸入密碼")):e!==a.value.password?o(new Error("兩次密碼輸入不一致")):o()},trigger:"blur"}]}),f=n=>{n&&n.validate(async e=>{if(e){const o="/api/users/register";try{const{data:r}=await B.post(o,a.value);F({message:"用戶註冊成功!.",type:"success"}),_.push({path:"/"})}catch(r){console.error("errrr",r)}}else return console.log("err submit"),!1})};return(n,e)=>{const o=E,r=h,d=x,v=q,w=U,b=R("router-link"),V=y;return N(),S("div",$,[u("section",I,[u("div",A,[D,l(V,{rules:g,ref_key:"ruleFormRef",ref:m,model:a.value,class:"registerForm","label-width":"80px"},{default:t(()=>[l(r,{label:"用戶名",prop:"name"},{default:t(()=>[l(o,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name=s),placeholder:"請輸入用戶名"},null,8,["modelValue"])]),_:1}),l(r,{label:"信箱",prop:"email"},{default:t(()=>[l(o,{modelValue:a.value.email,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.email=s),placeholder:"請輸入信箱"},null,8,["modelValue"])]),_:1}),l(r,{label:"密碼",prop:"password"},{default:t(()=>[l(o,{modelValue:a.value.password,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.password=s),placeholder:"請輸入密碼",type:"password"},null,8,["modelValue"])]),_:1}),l(r,{label:"確認密碼",prop:"password2"},{default:t(()=>[l(o,{modelValue:a.value.password2,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.password2=s),placeholder:"請確認密碼",type:"password"},null,8,["modelValue"])]),_:1}),l(r,{label:"選擇身分"},{default:t(()=>[l(v,{modelValue:a.value.identity,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.identity=s),placeholder:"選擇身分"},{default:t(()=>[l(d,{label:"管理員",value:"manager"}),l(d,{label:"員工",value:"employee"})]),_:1},8,["modelValue"])]),_:1}),l(r,null,{default:t(()=>[l(w,{onClick:e[5]||(e[5]=s=>f(m.value)),class:"submit-btn"},{default:t(()=>[i("註冊")]),_:1})]),_:1}),u("div",H,[u("p",null,[i(c(n.$t("hasAcc")),1),l(b,{to:"/login"},{default:t(()=>[i(c(n.$t("login")),1)]),_:1})])])]),_:1},8,["rules","model"])])])])}}});export{K as default};
